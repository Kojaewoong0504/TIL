# TIL - 2025.03.14 (금요일)

## 📝 오늘 배운 것

### 하노이탑 알고리즘

#### 하노이탑 이해
하노이 탑은 첫번째 기둥에 있는 크기가 피라미드 처럼 점점 작아지는 기둥을 목표 기둥으로 옮기는 게임이다. 단 기둥은 꼭 순차적으로 큰 것부터 작은 것으로 쌓여야 한다. 즉 크기가 제일 큰 기둥 위에 제일 작은 기둥이 오면 안된다. 또한 기둥은 작은 기둥 위에 큰 기둥이 놓여서도 안된다는 것이다.

1. 기둥 1개를 목표로 이동
이를 위해 제일 작은 기둥 1개를 목표로 이동한다. 그렇다면 1번에 있는 기둥 1개를 3번(목표)로 이동하면 끝이다. 그리고 재귀 함수의 탈출 조건이다. 1개의 기둥을 목표로 바로 이동한다.

2. 기둥 2개를 목표로 이동
다음은 기둥 2개를 1번에서 3번으로 이동하는 과정이다.
> 1. 1번에 있는 기둥 1개를 2번으로 임시로 옮긴다.
> 2. 1번에 있는 기둥 1개를 3번으로 옮긴다.
> 3. 2번에 임시로 있던 기둥 1개를 3번으로 옮긴다.

3. 기둥 3개를 목표로 이동
다음은 기둥 3개를 1번에서 3번으로 이동하는 과정이다.
> 1. 1번에 있는 기둥 1개를 3번으로 임시로 옮긴다.
> 2. 1번에 있는 기둥 1개를 2번으로 임시로 옮긴다.
> 3. 3번에 있는 기둥 1개를 2번으로 임시로 옮긴다.
> 4. 1번에 있는 기둥 1개를 3번으로 옮긴다.
> 5. 2번에 있는 기둥 1개를 1번으로 임시로 옮긴다.
> 6. 2번에 있는 기둥 1개를 3번으로 옮긴다.
> 7. 1번에 있는 기둥 1개를 3번으로 옮긴다.

이렇게 7번 이동했는데 보면 규칙이 있다. 기둥 1개를 옮길 때는 바로 기둥 2개를 옮길 때는 총 3번 중 중간 값인 2번째에 3개를 옮길 때는 7개 중 중간 값인 4번 째에 기둥 중 가장 넓은 기둥이 목표로 완전히 옮겨가게 된다. 

이 말은 n 번째 기둥을 목표로 이동하기 위해 n-1번의 기둥들이 임시 기둥으로 이동해야 한다는 것이다. 

그리고 만약 4개의 기둥을 옮긴다면 3개를 옮길떄 사용한 7번의 횟수를 사용한 뒤 가장 넓은 기둥을 목표로 옮기고 나머지 기둥들을 다시 목표한 기둥으로 옮기는 7번의 동작을 통해 총 15번의 동작을 할 것이다.

이는 기둥을 옮기는데 `2**n-1` 번의 움직임으로 기둥을 옮길 수 있다는 것이다.

마지막으로 하노이 탑 코드 설명이다.
```python
n = 3

def recursion(n, start, temp, final):
    if n == 1:
        print(f"{start} {final}")
        return

    recursion(n-1, start, final, temp)
    print(f"{start} {final}")
    recursion(n-1, temp, start, final)

print(2**n-1)
if n <= 20:
    recursion(n, 1, 2, 3)
```

개인적으로 재귀함수에서 가장 중요한 것은 재귀가 끝나는 순간의 조건을 아는 것이다. 그렇다면 하노이 탑의 재귀 탈출 조건은 무엇일까? 바로 기둥 1개를 목표로 하는 기둥에 옮기는 것이다. 그래서 만약 기둥의 개수가 1개일 때가 탈출 조건이다.

다음으로는 재귀 함수의 인자들에 대한 설명이다. 재귀 함수에는 4개의 인자를 포함시켰는데 첫번째는 기둥의 갯수, 두번째는 옮기기 시작할 기둥 세번째 인자는 임시로 사용할 기둥 마지막 인자는 목표 기둥이다.

그렇다면 탈출 조건에서 수행할 코드는 기둥을 시작점에서 목표점으로 옮겼다는 것을 출력하고 리턴을 하는 것이다. 이 후에는 총 n 개의 기둥 중 목표로 옮긴 1개의 기둥을 뺀 n-1개의 기둥을 옮기는 것이 된다. 이 때 우리는 n-1개의 기둥을 시작점에서 임시 막대를 목표로 이동을 할 것인데 이때 임시로 사용될 막대는 목표 막대를 사용할 것이다. 그렇게 해서 재귀 함수를 1. 시작점에서 2. 목표 막대를 임시로 사용해 3. 목표 기둥인 임시 막대로 이동하는 것이다.

이 후 다시 가장 넓은 기둥을 목표 기둥으로 옮기고 나머지 n-1개의 기둥을 임시기둥에 있는 2개의 기둥을 시작점으로 목표 지점인 최종 막대로 첫번째 있던 막대를 임시로 사용해 이동을 하게 되는 것이다.


## 💡 문제 해결

> 하노이 탑 알고리즘을 이해하기 위해 정말 많은 자료를 봤지만 명확하게 이애하기 어려웠다. 하지만 가장 작은 단위에서 이해를 하고 나니 알고 보니 매우 쉬운 것 이었다.

## 🔍 더 알아볼 것



## 🧐 느낀 점

역시 재귀 함수는 신기하면서도 어려운 것 같다. 괜히 분할하여 정복하라는 말이 있는 것이 아니다. 매우 작운 단위를 이해하니 큰 문제가 쉽게 풀리는 경우가 많다.

## 📚 참고 자료

- [하노이 탑(Tower of Hanoi) 재귀호출 코드 구현](https://youtu.be/vq7dpFWpwAE?si=_BamVzBOm5tIbzlN)